<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.guochen.dao.TComMapper">
  <resultMap id="BaseResultMap" type="com.guochen.model.TCom">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 26 20:05:50 CST 2016.
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="com_name" jdbcType="VARCHAR" property="comName" />
    <result column="con_name" jdbcType="VARCHAR" property="conName" />
    <result column="con_phone" jdbcType="VARCHAR" property="conPhone" />
    <result column="bu_scope_id" jdbcType="VARCHAR" property="buScopeId" />
    <result column="com_type" jdbcType="VARCHAR" property="comType" />
    <result column="business_license_path" jdbcType="VARCHAR" property="businessLicensePath" />
    <result column="taxrece_path" jdbcType="VARCHAR" property="taxrecePath" />
    <result column="orcode_path" jdbcType="VARCHAR" property="orcodePath" />
    <result column="ceau_path" jdbcType="VARCHAR" property="ceauPath" />
    <result column="bank_account" jdbcType="VARCHAR" property="bankAccount" />
    <result column="taxrece_no" jdbcType="VARCHAR" property="taxreceNo" />
    <result column="account" jdbcType="VARCHAR" property="account" />
    <result column="com_addr" jdbcType="VARCHAR" property="comAddr" />
    <result column="com_phone" jdbcType="VARCHAR" property="comPhone" />
    <result column="break_no" jdbcType="INTEGER" property="breakNo" />
    <result column="create_time" jdbcType="VARCHAR" property="createTime" />
    <result column="update_time" jdbcType="VARCHAR" property="updateTime" />
    <result column="alternate_field1" jdbcType="VARCHAR" property="alternateField1" />
    <result column="alternate_field2" jdbcType="VARCHAR" property="alternateField2" />
    <result column="forbid_user" jdbcType="VARCHAR" property="forbidUser" />
    <result column="forbid_time" jdbcType="VARCHAR" property="forbidTime" />
    <result column="forbid_reason" jdbcType="VARCHAR" property="forbidReason" />
    <result column="unpass_reason" jdbcType="VARCHAR" property="unpassReason" />
    <result column="files" jdbcType="VARCHAR" property="files" />
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 26 20:05:50 CST 2016.
    -->
    delete from t_com
    where id = #{id,jdbcType=INTEGER}
  </delete>

  <insert id="insert" parameterType="com.guochen.model.TCom" useGeneratedKeys="true" keyProperty="id">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 26 20:05:50 CST 2016.
    
    <selectKey keyProperty="id" order="BEFORE" resultType="java.lang.Integer">
      SELECT LAST_INSERT_ID()
    </selectKey>-->
    insert into t_com (id, com_name, con_name, 
      con_phone, bu_scope_id, com_type, 
      business_license_path, taxrece_path, orcode_path, 
      ceau_path, bank_account, taxrece_no, 
      account, com_addr, com_phone, 
      break_no, create_time, update_time, 
      alternate_field1, alternate_field2,unpass_reason,files)
    values (#{id,jdbcType=INTEGER}, #{comName,jdbcType=VARCHAR}, #{conName,jdbcType=VARCHAR}, 
      #{conPhone,jdbcType=VARCHAR}, #{buScopeId,jdbcType=VARCHAR}, #{comType,jdbcType=VARCHAR}, 
      #{businessLicensePath,jdbcType=VARCHAR}, #{taxrecePath,jdbcType=VARCHAR}, #{orcodePath,jdbcType=VARCHAR}, 
      #{ceauPath,jdbcType=VARCHAR}, #{bankAccount,jdbcType=VARCHAR}, #{taxreceNo,jdbcType=VARCHAR}, 
      #{account,jdbcType=VARCHAR}, #{comAddr,jdbcType=VARCHAR}, #{comPhone,jdbcType=VARCHAR}, 
      #{breakNo,jdbcType=INTEGER}, #{createTime,jdbcType=VARCHAR}, #{updateTime,jdbcType=VARCHAR}, 
      #{alternateField1,jdbcType=VARCHAR}, #{alternateField2,jdbcType=VARCHAR},#{unpassReason,jdbcType=VARCHAR},#{files,jdbcType=VARCHAR})
  </insert>
  
  <update id="updateByPrimaryKey" parameterType="com.guochen.model.TCom">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 26 20:05:50 CST 2016.
    -->
    update t_com
    set com_name = #{comName,jdbcType=VARCHAR},
      con_name = #{conName,jdbcType=VARCHAR},
      con_phone = #{conPhone,jdbcType=VARCHAR},
      bu_scope_id = #{buScopeId,jdbcType=VARCHAR},
      com_type = #{comType,jdbcType=VARCHAR},
      business_license_path = #{businessLicensePath,jdbcType=VARCHAR},
      taxrece_path = #{taxrecePath,jdbcType=VARCHAR},
      orcode_path = #{orcodePath,jdbcType=VARCHAR},
      ceau_path = #{ceauPath,jdbcType=VARCHAR},
      bank_account = #{bankAccount,jdbcType=VARCHAR},
      taxrece_no = #{taxreceNo,jdbcType=VARCHAR},
      account = #{account,jdbcType=VARCHAR},
      com_addr = #{comAddr,jdbcType=VARCHAR},
      com_phone = #{comPhone,jdbcType=VARCHAR},
      break_no = #{breakNo,jdbcType=INTEGER},
      create_time = #{createTime,jdbcType=VARCHAR},
      update_time = #{updateTime,jdbcType=VARCHAR},
      alternate_field1 = #{alternateField1,jdbcType=VARCHAR},
      alternate_field2 = #{alternateField2,jdbcType=VARCHAR},
      unpass_reason = #{unpassReason,jdbcType=VARCHAR},
      files= #{files,jdbcType=VARCHAR}
    where id = #{id,jdbcType=INTEGER}
  </update>
  
  <sql id="Base_Column_List_With_T" >
    t.id,t.com_name,t.con_name,t.con_phone,t.bu_scope_id,t.com_type,t.business_license_path,
	t.taxrece_path,t.orcode_path,t.ceau_path,t.bank_account,t.taxrece_no,t.account,t.com_addr,
	t.com_phone,t.break_no,t.create_time,t.update_time,t.alternate_field1,t.alternate_field2,
    tu.forbid_user,tu.forbid_time,tu.forbid_reason,t.unpass_reason,t.files
  </sql>
  
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 26 20:05:50 CST 2016.
    -->
    select 
    <include refid="Base_Column_List_With_T" />
    from t_com t,t_user tu 
    where 1=1 and t.id=tu.com_id and t.id = #{id,jdbcType=INTEGER}
  </select>
  
  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 26 20:05:50 CST 2016.
    -->
    select 
    <include refid="Base_Column_List_With_T" />
    from t_com t,t_user tu 
    where 1=1 and t.id=tu.com_id
  </select>
  
  <sql id="Base_Where_T">
  		<if test="userStatus!=null and userStatus.trim().length()>0">
			and tu.user_status = '${userStatus}'
		</if>
		<if test="comType!=null and comType.trim().length()>0">
			and t.com_type = '${comType}'
		</if>
		<if test="comName!=null and comName.trim().length()>0">
			and t.com_name like '%${comName}%'
		</if>
		<if test="conName!=null and conName.trim().length()>0">
			and t.con_name like '%${conName}%'
		</if>
		<if test="alternateField2!=null and alternateField2.trim().length()>0">
			and t.alternate_field2 like '%${alternateField2}%'
		</if>
  </sql>
  
  <select id="selectPageList" resultMap="BaseResultMap" parameterType="com.guochen.model.TCom">
		select
		<include refid="Base_Column_List_With_T" />
		from t_com t,t_user tu 
		where 1=1 and t.id=tu.com_id 
		<include refid="Base_Where_T" />
		order by t.create_time desc
	</select>
	<select id="selectList" resultMap="BaseResultMap" parameterType="com.guochen.model.TCom">
		select
		<include refid="Base_Column_List_With_T" />
		from t_com t,t_user tu 
		where 1=1 and t.id=tu.com_id 
		<include refid="Base_Where_T" />
		order by t.create_time desc
	</select>
	
	<select id="selectPageCount" resultType="long" parameterType="com.guochen.model.TCom">
		select count(*) 
		from t_com t,t_user tu 
		where 1=1 and t.id=tu.com_id 
		<include refid="Base_Where_T" />
	</select>
	
	<delete id="deleteByIds">
    delete from t_com
    where 1 != 1
   	<if test="ids != null and ids.length > 0">
   		or id in
		<foreach collection="ids" index="index" item="item" open="(" separator="," close=")">  
	       #{item}   
	    </foreach>
   	</if>
  </delete>
  
  <select id="selectByUserId" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List_With_T" />
    from t_com t,t_user tu 
    where 1=1 and t.id=tu.com_id
    and tu.id = #{userId,jdbcType=INTEGER}
  </select>
</mapper>